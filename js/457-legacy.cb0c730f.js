"use strict";(self["webpackChunknew_gui"]=self["webpackChunknew_gui"]||[]).push([[457],{5457:function(e,t,a){a.r(t),a.d(t,{default:function(){return $e}});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashboard-beta-container",on:{dragover:e.dragOver,drop:e.dropHandler}},[a("menu-bar"),a("TemplateTable"),a("TemplateKG")],1)},n=[],i=a(4367),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-card",{staticClass:"dashboard-menu",attrs:{outlined:""}},e._l(e.menu.menuList,(function(e){return a("v-row",{key:e.label,attrs:{"no-gutters":""}},[a("v-col",[a("MenuBtn",{attrs:{item:e}})],1)],1)})),1)],1)},o=[],l=a(629),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,n=t.attrs;return[a("v-btn",{staticClass:"ma-2 menu-btn",attrs:{icon:"",text:"",draggable:"true"},on:{dblclick:e.addCards}},[a("v-icon",e._g(e._b({},"v-icon",n,!1),s),[e._v(" "+e._s(e.item.icon)+" ")])],1)]}}])},[a("span",[e._v(e._s(e.item.label))])])],1)},h=[],d={data:function(){return{}},props:["item"],methods:{addCards:function(){console.log("adding"+this.item.store)}}},u=d,v=a(3736),g=a(3453),p=a.n(g),m=a(3150),f=a(6428),b=a(9330),y=(0,v.Z)(u,c,h,!1,null,null,null),_=y.exports;p()(y,{VBtn:m.Z,VIcon:f.Z,VTooltip:b.Z});var w={data:function(){return{items:[]}},computed:(0,i.Z)({},(0,l.rn)(["menu"])),components:{MenuBtn:_},created:function(){console.log(this.menu)}},S=w,x=a(3237),D=a(2102),T=a(2877),C=(0,v.Z)(S,r,o,!1,null,"2680bb25",null),k=C.exports;p()(C,{VCard:x.Z,VCol:D.Z,VRow:T.Z});var Z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-hover",{scopedSlots:e._u([{key:"default",fn:function(t){var s=t.hover;return[a("v-card",{ref:"cardComp",staticClass:"card-tabular",style:{top:e.marginTop+"px",left:e.marginLeft+"px",width:e.width+"px",height:e.height+"px",position:"absolute"},attrs:{elevation:s?12:5,draggable:e.draggable,outlined:"",id:e.componentId},on:{dragstart:e.dragStart,contextmenu:e.rightClickMenuShow,dblclick:e.printCorpus}},[[e.dataStatus?e._e():a("v-card-text",{staticClass:"card-name"},[e._v(" No Table Data ")]),e.dataStatus?a("div",[a("v-tabs",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.sheetNames,(function(t){return a("v-tab",{key:t},[e._v(" "+e._s(t)+" ")])})),1),a("v-tabs-items",{ref:"tabletabs",model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.sheetNames,(function(t){return a("v-tab-item",{key:t},[a("v-data-table",{staticClass:"elevation-1",attrs:{height:e.height-50-70-150+"px",loading:e.loadingStatus,"show-select":"",headers:e.convert(e.currentData["data"][t]["tableInfo"]),items:e.currentData["data"][t]["tableData"],"item-key":e.sheetItemKey,"single-select":e.singleSelect,search:e.search,"custom-filter":e.filterOnlyCapsText},on:{"item-selected":e.itemSelectedHandler,"toggle-select-all":e.selectAllHandler},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-text-field",{staticClass:"mx-4",staticStyle:{"margin-top":"3px"},attrs:{label:"Search (UPPER CASE ONLY)"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]},proxy:!0},{key:"footer",fn:function(){return[a("v-container",[a("v-row",{attrs:{justify:"space-between"}},[a("v-col",{attrs:{cols:"3"}},[a("v-text-field",{staticStyle:{width:"80px"},attrs:{type:"number",label:"Less than"},model:{value:e.calories,callback:function(t){e.calories=t},expression:"calories"}})],1),a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{cols:"3"}},[a("v-btn",{on:{click:e.retrieveGraphFromTableHandler}},[e._v(" Retrieve ")])],1)],1)],1)]},proxy:!0}],null,!0),model:{value:e.selected_rows,callback:function(t){e.selected_rows=t},expression:"selected_rows"}})],1)})),1)],1):e._e()],a("div",{staticClass:"resizer resizer-r",on:{mousedown:e.mouseDownHandler}}),a("div",{staticClass:"resizer resizer-b",on:{mousedown:e.mouseDownHandler}})],2)]}}])})],1)},z=[],H=(a(4916),a(3123),a(7941),a(7042),a(2479),a(1539),a(9714),a(4747),a(6699),a(2023),{data:function(){return{initialX:void 0,initialY:void 0,dataStatus:!1,resizeX:void 0,resizeY:void 0,width:500,height:600,resizeWidth:0,resizeHeight:0,marginTop:0,marginLeft:0,topMargin:window.innerHeight/2,leftMargin:window.innerWidth/2,resizingStatus:!1,ff:!1,rightMenuX:0,rightMenuY:0,loadingStatus:void 0,componentId:"tabular-0",items:[{title:"Remove node"}],container:".documents-components-list",selected:[],sheets:[],currentDataBase:[],answerBasedRetrieval:{},flag:!1,tableItemKey:"",search:"",calories:"",desserts:[],headers:[],selected_rows:[],singleSelect:!1,sheetNames:[],tab:null,sheetItemKey:null,currentSheet:null,currentData:null}},methods:{dragStart:function(e){var t=document.querySelector("#".concat(e.target.id)),a=parseInt(t.style.left.split("px")[0])-e.clientX,s=parseInt(t.style.top.split("px")[0])-e.clientY;e.dataTransfer.setData("item-id",e.target.id),e.dataTransfer.setData("initialLeft",a),e.dataTransfer.setData("initialTop",s),this.$store.dispatch("changeCurrentDraggingVM",this)},mouseDownHandler:function(e){this.resizeX=e.clientX,this.resizeY=e.clientY,document.addEventListener("mousemove",this.mouseMoveHandler),document.addEventListener("mouseup",this.mouseUpHandler),this.resizingStatus=!0},mouseMoveHandler:function(e){var t=e.clientX-this.resizeX,a=e.clientY-this.resizeY;this.width=this.resizeWidth+t,this.height=this.resizeHeight+a},mouseUpHandler:function(e){this.resizeWidth=this.width,this.resizeHeight=this.height,document.removeEventListener("mousemove",this.mouseMoveHandler),document.removeEventListener("mouseup",this.mouseUpHandler),this.resizingStatus=!1},rightClickMenuShow:function(e){e.preventDefault(),this.showRightClickMenu=!0,this.rightMenuX=e.clientX,this.rightMenuY=e.clientY},printCorpus:function(){console.log(this.itemProps)},toggleSheet:function(e){this.currentSheet!=e&&(this.currentSheet=e,this.sheetDataUpdate(this.currentSheet))},sheetDataUpdate:function(e){var t=this.itemProps.inputData,a=t["data"][e];if(this.headers=[],Object.keys(a).length>0){for(var s=0,n=Object.keys(a[0]);s<n.length;s++){var i=n[s];this.headers.push({text:i.charAt(0).toUpperCase()+i.slice(1),value:i})}this.tableItemKey=this.headers[0]["value"],this.currentDataBase=Object.values(a),this.desserts=Object.values(a)}},filterOnlyCapsText:function(e,t,a){return console.log(e,t,a),null!=e&&null!=t&&"string"===typeof e&&-1!==e.toString().indexOf(t)},convert:function(e){var t=[];return e.forEach((function(e){var a={text:e["label"],value:e["value"]};t.push(a)})),t},itemSelectedHandler:function(e){var t=e.item,a=e.value;a?this.$store.dispatch("setTableSelected",{action:"add",sheetName:this.currentSheet,value:[t]}):this.$store.dispatch("setTableSelected",{action:"remove",sheetName:this.currentSheet,value:[t]})},retrieveGraphFromTableHandler:function(){this.$store.dispatch("retrieveGraphFromTable")},selectAllHandler:function(e){var t=e.items,a=e.value;console.log(t,a),a?this.$store.dispatch("setTableSelected",{action:"add",sheetName:this.currentSheet,value:t}):this.$store.dispatch("setTableSelected",{action:"remove",sheetName:this.currentSheet,value:t})},updateItemKey:function(){if(this.currentSheet=this.currentData["sheet"][this.tab],null!=this.currentSheet){var e=this.currentData["data"][this.currentSheet]["tableData"][0];if(e){var t=Object.keys(e);console.log("check =================== here!!!"),console.log(e),console.log(this.currentSheet),t.includes("relation_id")?this.sheetItemKey="relation_id":t.includes("id")&&(this.sheetItemKey="id")}}}},created:function(){this.$store.dispatch("getTableData"),this.marginTop=this.topMargin-this.height/2,this.marginLeft=this.leftMargin-this.width/2,this.resizeWidth=this.width,this.resizeHeight=this.height},computed:(0,i.Z)((0,i.Z)({},(0,l.rn)(["tableData","tableSelection","tableSelected","tableInteractiveMode","interactiveTableData"])),{},{draggable:function(){return!this.resizingStatus}}),components:{},watch:{tableData:function(){this.tableInteractiveMode||(this.dataStatus=!0,this.sheetNames=this.tableData["sheet"],console.log("check here!!!"),console.log(this.tableData),this.currentData=this.tableData,null==this.tab&&(this.tab=0),this.updateItemKey())},tableInteractiveMode:function(){this.tableInteractiveMode||(this.currentData=this.tableData,this.sheetNames=this.currentData["sheet"],null==this.tab&&(this.tab=0),this.updateItemKey(),this.selected_rows=[])},interactiveTableData:function(){console.log(this.interactiveTableData),this.tableInteractiveMode&&(this.dataStatus=!0,this.interactiveTableData["sheet"].length>0?(this.currentData=this.interactiveTableData,this.sheetNames=this.currentData["sheet"],null==this.tab&&(this.tab=0),this.updateItemKey(),this.selected_rows=[]):(alert("Nothing retrieved from table!"),this.selected_rows=[]))},tab:function(){console.log(this.currentData),null!=this.currentData&&this.updateItemKey(),console.log(this.sheetItemKey)},dataStatus:function(e,t){if(e){var a=document.querySelector("#"+this.componentId).querySelector(".resizer-b"),s=25;a.style.bottom=-s-12+"px"}},marginTop:function(e){console.log(e)}}}),I=H,E=a(4589),M=(0,E.Ji)("v-card__actions"),V=(0,E.Ji)("v-card__subtitle"),L=(0,E.Ji)("v-card__text"),R=(0,E.Ji)("v-card__title"),N=(x.Z,a(9846)),$=a(4998),P=a(4561),O=a(2936),K=a(3325),B=a(1824),A=(0,K.Z)(P.Z,O.Z).extend({name:"v-hover",props:{disabled:{type:Boolean,default:!1},value:{type:Boolean,default:void 0}},methods:{onMouseEnter:function(){this.runDelay("open")},onMouseLeave:function(){this.runDelay("close")}},render:function(){return this.$scopedSlots.default||void 0!==this.value?(this.$scopedSlots.default&&(e=this.$scopedSlots.default({hover:this.isActive})),Array.isArray(e)&&1===e.length&&(e=e[0]),e&&!Array.isArray(e)&&e.tag?(this.disabled||(e.data=e.data||{},this._g(e.data,{mouseenter:this.onMouseEnter,mouseleave:this.onMouseLeave})),e):((0,B.Kd)("v-hover should only contain a single element",this),e)):((0,B.Kd)("v-hover is missing a default scopedSlot or bound value",this),null);var e}}),j=a(4227),Y=a(1759),X=a(7090),G=a(1954),W=a(5978),q=(0,v.Z)(I,Z,z,!1,null,"219ca263",null);q.exports;p()(q,{VBtn:m.Z,VCard:x.Z,VCardText:L,VCol:D.Z,VContainer:N.Z,VDataTable:$.Z,VHover:A,VRow:T.Z,VTab:j.Z,VTabItem:Y.Z,VTabs:X.Z,VTabsItems:G.Z,VTextField:W.Z});var U=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-hover",{scopedSlots:e._u([{key:"default",fn:function(t){var s=t.hover;return[a("v-card",{ref:"cardComp",staticClass:"card-tabular",style:{top:e.marginTop+"px",left:e.marginLeft+"px",width:e.width+"px",height:e.height+"px",position:"absolute"},attrs:{elevation:s?12:5,draggable:e.draggable,outlined:"",id:e.componentId},on:{dragstart:e.dragStart,contextmenu:e.rightClickMenuShow}},[e._t("core",(function(){return[a("v-card-text",{staticClass:"card-name"},[e._v(" Empty Container ")])]})),a("div",{staticClass:"resizer resizer-r",on:{mousedown:e.mouseDownHandler}}),a("div",{staticClass:"resizer resizer-b",on:{mousedown:e.mouseDownHandler}})],2)]}}],null,!0)})],1)},F=[],J={data:function(){return{dataStatus:!1,resizeX:void 0,resizeY:void 0,width:500,height:1e3,resizeWidth:0,resizeHeight:0,marginTop:0,marginLeft:0,topMargin:window.innerHeight/2,leftMargin:window.innerWidth/2,resizingStatus:!1,rightMenuX:0,rightMenuY:0,loadingStatus:void 0,componentId:"tabular-0",items:[{title:"Remove node"}],container:".documents-components-list",selected:[],sheets:[],currentDataBase:[],answerBasedRetrieval:{},flag:!1,tableItemKey:"",search:"",calories:"",desserts:[],headers:[],selected_rows:[],singleSelect:!1,sheetNames:[],tab:null,sheetItemKey:null,currentSheet:null,currentData:null}},methods:{dragStart:function(e){var t=document.querySelector("#".concat(e.target.id)),a=parseInt(t.style.left.split("px")[0])-e.clientX,s=parseInt(t.style.top.split("px")[0])-e.clientY;e.dataTransfer.setData("item-id",e.target.id),e.dataTransfer.setData("initialLeft",a),e.dataTransfer.setData("initialTop",s),this.$store.dispatch("changeCurrentDraggingVM",this)},mouseDownHandler:function(e){this.resizeX=e.clientX,this.resizeY=e.clientY,document.addEventListener("mousemove",this.mouseMoveHandler),document.addEventListener("mouseup",this.mouseUpHandler),this.resizingStatus=!0},mouseMoveHandler:function(e){var t=e.clientX-this.resizeX,a=e.clientY-this.resizeY;this.width=this.resizeWidth+t,this.height=this.resizeHeight+a},mouseUpHandler:function(e){this.resizeWidth=this.width,this.resizeHeight=this.height,document.removeEventListener("mousemove",this.mouseMoveHandler),document.removeEventListener("mouseup",this.mouseUpHandler),this.resizingStatus=!1},rightClickMenuShow:function(e){e.preventDefault(),this.showRightClickMenu=!0,this.rightMenuX=e.clientX,this.rightMenuY=e.clientY}},created:function(){this.marginTop=50,this.marginLeft=100,this.resizeWidth=this.width,this.resizeHeight=this.height},computed:{draggable:function(){return!this.resizingStatus}},components:{},watch:{height:function(e){this.$store.dispatch("containerSizeChange",{container:"tableContainer",height:this.height})}}},Q=J,ee=(0,v.Z)(Q,U,F,!1,null,"8ea166f8",null),te=ee.exports;p()(ee,{VCard:x.Z,VCardText:L,VHover:A});var ae=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("CTemplate",{scopedSlots:e._u([{key:"core",fn:function(){return[a("TableViewerCore")]},proxy:!0}])})},se=[],ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{id:"inspire"}},[a("div",{staticClass:"tmp"},[a("v-tabs",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.sheetNames,(function(t){return a("v-tab",{key:t},[e._v(" "+e._s(t)+" ")])})),1),a("v-tabs-items",{ref:"tabletabs",model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.sheetNames,(function(t){return a("v-tab-item",{key:t},[a("v-data-table",{staticClass:"elevation-1",attrs:{height:e.height-50-70-170+"px","show-select":"",headers:e.convert(e.currentData["data"][t]["tableInfo"]),items:e.currentData["data"][t]["tableData"],"item-key":e.sheetItemKey,"single-select":e.singleSelect,search:e.search,"custom-filter":e.filterOnlyCapsText},on:{"item-selected":e.itemSelectedHandler,"toggle-select-all":e.selectAllHandler},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-text-field",{staticClass:"mx-4",staticStyle:{"margin-top":"3px"},attrs:{label:"Search (UPPER CASE ONLY)"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]},proxy:!0},{key:"footer",fn:function(){return[a("v-container",[a("v-row",{attrs:{justify:"space-between"}},[a("v-col",{attrs:{cols:"3"}},[a("v-text-field",{staticStyle:{width:"80px"},attrs:{type:"number",label:"Less than"},model:{value:e.calories,callback:function(t){e.calories=t},expression:"calories"}})],1),a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{cols:"3"}},[a("v-btn",{on:{click:e.retrieveGraphFromTableHandler}},[e._v(" Retrieve ")])],1)],1)],1)]},proxy:!0}],null,!0),model:{value:e.selected_rows,callback:function(t){e.selected_rows=t},expression:"selected_rows"}})],1)})),1)],1)])},ie=[],re={data:function(){return{search:"",calories:"",desserts:[],headers:[],selected_rows:[],singleSelect:!1,sheetNames:[],tab:null,sheetItemKey:null,currentSheet:null,currentData:null,height:1e3}},computed:(0,i.Z)((0,i.Z)({},(0,l.rn)(["tableData","tableSelection","tableSelected","tableInteractiveMode","interactiveTableData","tableContainer"])),{},{windowHeight:function(){return window.innerHeight-350+"px"}}),beforeCreate:function(){this.height=this.tableContainer.height,console.log(this.height)},created:function(){this.$store.dispatch("getTableData"),this.height=this.tableContainer.height},methods:{filterOnlyCapsText:function(e,t,a){return console.log(e,t,a),null!=e&&null!=t&&"string"===typeof e&&-1!==e.toString().indexOf(t)},convert:function(e){var t=[];return e.forEach((function(e){var a={text:e["label"],value:e["value"]};t.push(a)})),t},itemSelectedHandler:function(e){var t=e.item,a=e.value;a?this.$store.dispatch("setTableSelected",{action:"add",sheetName:this.currentSheet,value:[t]}):this.$store.dispatch("setTableSelected",{action:"remove",sheetName:this.currentSheet,value:[t]})},retrieveGraphFromTableHandler:function(){this.$store.dispatch("retrieveGraphFromTable")},selectAllHandler:function(e){var t=e.items,a=e.value;console.log(t,a),a?this.$store.dispatch("setTableSelected",{action:"add",sheetName:this.currentSheet,value:t}):this.$store.dispatch("setTableSelected",{action:"remove",sheetName:this.currentSheet,value:t})},updateItemKey:function(){if(this.currentSheet=this.currentData["sheet"][this.tab],null!=this.currentSheet){var e=this.currentData["data"][this.currentSheet]["tableData"][0];if(e){var t=Object.keys(e);console.log("check =================== here!!!"),console.log(e),console.log(this.currentSheet),t.includes("relation_id")?this.sheetItemKey="relation_id":t.includes("id")&&(this.sheetItemKey="id")}}}},watch:{tableData:function(){this.tableInteractiveMode||(this.sheetNames=this.tableData["sheet"],console.log("check here!!!"),console.log(this.tableData),this.currentData=this.tableData,null==this.tab&&(this.tab=0),this.updateItemKey())},tableInteractiveMode:function(){this.tableInteractiveMode||(this.currentData=this.tableData,this.sheetNames=this.currentData["sheet"],null==this.tab&&(this.tab=0),this.updateItemKey(),this.selected_rows=[])},interactiveTableData:function(){console.log(this.interactiveTableData),this.tableInteractiveMode&&(this.interactiveTableData["sheet"].length>0?(this.currentData=this.interactiveTableData,this.sheetNames=this.currentData["sheet"],null==this.tab&&(this.tab=0),this.updateItemKey(),this.selected_rows=[]):(alert("Nothing retrieved from table!"),this.selected_rows=[]))},tab:function(){console.log(this.currentData),null!=this.currentData&&this.updateItemKey(),console.log(this.sheetItemKey)},"tableContainer.height":function(e,t){console.log(this.height),this.height=this.tableContainer.height}}},oe=re,le=(0,v.Z)(oe,ne,ie,!1,null,null,null),ce=le.exports;p()(le,{VBtn:m.Z,VCol:D.Z,VContainer:N.Z,VDataTable:$.Z,VRow:T.Z,VTab:j.Z,VTabItem:Y.Z,VTabs:X.Z,VTabsItems:G.Z,VTextField:W.Z});var he={data:function(){return{containerId:"tableContainer"}},components:{CTemplate:te,TableViewerCore:ce}},de=he,ue=(0,v.Z)(de,ae,se,!1,null,null,null),ve=ue.exports,ge=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("c-template",{scopedSlots:e._u([{key:"core",fn:function(){return[a("KgViewerCore")]},proxy:!0}])})},pe=[],me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fullHeight",staticStyle:{position:"relative"}},[a("div",{staticClass:"graph-btn-container"},[a("v-row",{attrs:{"no-gutters":"",justify:"space-between"}},[a("v-col",{key:"0",attrs:{sm:"3",cols:"2"}},[a("v-btn",{staticClass:"kg-view-btn",attrs:{small:""},on:{click:e.resetGraphTableHandler}},[e._v(" Reset ")]),a("v-btn",{staticClass:"kg-view-btn",attrs:{small:"",color:e.zoomPanColor},on:{click:e.zoomPanToggleHandler}},[a("v-icon",[e._v(" mdi-arrow-expand-all ")])],1),a("v-btn",{staticClass:"kg-view-btn",attrs:{small:"",color:e.lassoColor},on:{click:e.lassoToggleHandler}},[a("v-icon",[e._v(" mdi-lasso ")])],1)],1),a("v-col",{key:"1",attrs:{cols:"4",sm:"3"}},[a("v-slider",{attrs:{"thumb-size":24,"thumb-label":"always"},on:{click:e.changeThreshold},model:{value:e.user_defined_thre,callback:function(t){e.user_defined_thre=t},expression:"user_defined_thre"}})],1),a("v-col",{key:"2",attrs:{cols:"1",sm:"3"}},[a("v-btn",{staticClass:"retrieve-type-node-btn",attrs:{small:""},on:{click:e.retrieve_types_nodes}},[e._v(" Retrieve ")])],1)],1)],1),a("v-row",{style:{height:e.OVERVIEW_HEIGHT,"margin-top":"20px"}},[a("v-col",{attrs:{cols:"6"}},[a("div",{attrs:{id:"div_node_overview"}})]),a("v-col",{attrs:{cols:"6"}},[a("div",{attrs:{id:"div_link_overview"}})])],1),a("div",{staticClass:"fullHeight",style:{height:e.HEIGHT},attrs:{id:"div_graph"}}),a("v-overlay",{attrs:{value:e.loading_value}},[a("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1)],1)},fe=[],be=a(5200),ye=(a(7327),a(9720),a(2707),a(561),a(1249),a(8722)),_e=a(3469),we=a(682),Se=a(3938),xe=a(2695),De={components:{},data:function(){return{selectedEntities:[],selectedRelations:[],currentEntities:[],currentRelations:[],lassoColor:"grey",zoomPanColor:"green",lassoStatus:!1,zoomPanStatus:!0,lasso:null,zoom:null,loading_value:!1,tip:null,user_defined_thre:5,neo4jd3:null,brushed:{entity_type:[],relationship_type:[]}}},created:function(){this.$store.dispatch("getGraphOverview"),window["d3"]=we,this.tip=xe().attr("class","d3-tip").offset([-10,80]).html((function(e){return"<strong>Relation: </strong>"+e+"<br></span>"})),console.log(document.querySelector("#div_graph"))},methods:{changeThreshold:function(){this.$store.dispatch("setExpandTh",this.user_defined_thre)},drawNeo4jd3:function(){var e=this;if(we.selectAll(".d3-tip").remove(),null==this.neo4jd3){var t=ye.Z("#div_graph",{neo4jData:this.graphData,nodeRadius:30,infoPanel:!1,onNodeDoubleClick:function(e){},onNodeMouseEnter:function(t){e.hover_node=t},onNodeClick:function(t,a){if(console.log(t),1==t.showBtnPanel)return we.select("#node-".concat(t.id)).selectAll(".circle-button").remove(),void(t.showBtnPanel=!1);t.showBtnPanel=!0;var s={b:{action:"remove",value:10,pos:0}};if(0==e.relationStatusReady)console.log("nononono");else{console.log(e.relationTypeData["results"][0]["data"][0]["graph"]["nodes"]),console.log(a);for(var n=e.relationTypeData["results"][0]["data"][0]["graph"]["nodes"].filter((function(e){return e.id==t.id})),i=n[0]["relationship_types"],r=function(e){return Object.values(e).reduce((function(e,t){return e+t}))},o=r(i),l=0,c=Object.entries(i);l<c.length;l++){var h=(0,be.Z)(c[l],2),d=h[0],u=h[1];s[d]={action:d,value:u/o*30}}console.log("check data"),console.log(s)}var v=we.select("#node-".concat(t.id)),g=v,p=we.pie().sort(null).value((function(e){return e.value.value})),m=p(we.entries(s)),f=g.selectAll("whatever").data(m).enter(),b=f.append("path").attr("d",we.arc().innerRadius(30).outerRadius(50)).attr("class","circle-button").attr("fill",(function(e,t){return 0==t?"#BB6464":"#94B49F"})).style("stroke-width","2px").style("stroke","white").style("opacity",.7).style("cursor","pointer").attr("title","test");f.append("path").attr("d","M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M7,13H17V11H7").attr("transform","translate(20, -35) scale(0.7)").attr("class","circle-button");we.select("svg").call(e.tip),b.on("mouseover",(function(t){we.select(this).style("opacity",1);var a=t["data"]["value"]["action"];console.log(a),e.tip.show(a)})).on("mouseout",(function(t){we.select(this).style("opacity",.7);var a=t["data"]["value"]["action"];e.tip.hide(a)})).on("click",(function(a,s){var n=t["id"],i=a.data.value.action;console.log(a),e.tip.hide(a.data.value.action),"remove"==i?e.$store.dispatch("node_remove",{node_id:n}):(console.log(a.data.value.action),e.$store.dispatch("node_expand",{node_id:n,relation:a.data.key}))}))}});this.neo4jd3=t}else this.neo4jd3.updateWithNeo4jData(this.graphData);window.neo4jd3=this.neo4jd3,window.graph=this.graphData,e.lassoStatus?(e.disableZoom(),e.enableLasso()):(e.disableLasso(),e.enableZoomPan())},resetGraphTableHandler:function(){this.$store.dispatch("resetTableGraph")},toggleZoomPanLasso:function(){this.zoomPanStatus=!this.zoomPanStatus,this.lassoStatus=!this.lassoStatus,this.zoomPanColor=this.zoomPanStatus?"green":"grey",this.lassoColor=this.lassoStatus?"green":"grey"},zoomPanToggleHandler:function(){this.zoomPanStatus||(this.toggleZoomPanLasso(),this.disableLasso(),this.enableZoomPan())},lassoToggleHandler:function(){this.lassoStatus||(this.toggleZoomPanLasso(),this.disableZoom(),this.enableLasso())},enableLasso:function(){var e=we.select("#div_graph").select("svg"),t=e.selectAll(".outline"),a=this,s=function(){console.log(111),r.items().attr("fill","green").classed("not_possible",!0).classed("selected",!1)},n=function(){r.possibleItems().classed("not_possible",!1).classed("possible",!0),r.notPossibleItems().classed("not_possible",!0).classed("possible",!1)},i=function(){r.items().classed("not_possible",!1).classed("possible",!1),r.selectedItems().classed("selected",!0),a.selectedEntities.splice(0,a.selectedEntities.length),a.selectedRelations.splice(0,a.selectedRelations.length),r.selectedItems().each((function(e){var t=this.nodeName;"circle"==t?(console.log("adding entity"+e.id),a.selectedEntities.push(e.id)):(console.log("adding Relations"+e.id),a.selectedRelations.push(e.id))}))},r=_e.lasso().closePathSelect(!0).closePathDistance(100).items(t).targetArea(e).on("start",s).on("draw",n).on("end",i);e.call(r)},disableLasso:function(){var e=we.select("#div_graph").select("svg");e.on(".dragstart",null),e.on(".drag",null),e.on(".dragend",null)},enableZoomPan:function(){var e=we.select("#div_graph").select("svg");e.call(we.zoom().on("zoom",(function(){var t=we.event.transform.k,a=[we.event.transform.x,we.event.transform.y];console.log(1);var s=e.select("g");s.attr("transform","translate("+a[0]+", "+a[1]+") scale("+t+")")}))).on("dblclick.zoom",null)},disableZoom:function(){var e=we.select("#div_graph").select("svg");e.on(".zoom",null)},drawBarChart:function(e,t){for(var a=this,s=[],n=Object.keys(t),i=0;i<n.length;i++)s.push({key:n[i],value:t[n[i]]});s.sort((function(e,t){return e.value-t.value})),s.reverse();var r={top:20,right:30,bottom:90,left:70},o={top:230,right:30,bottom:10,left:70},l=window.innerWidth*(7/12)*.5-r.left-r.right,c=300-r.top-r.bottom,h=300-o.top-o.bottom,d=we.select(e).append("svg").attr("width",l+r.left+r.right).attr("height",c+r.top+r.bottom),u=d.append("g").attr("class","focus").attr("transform","translate("+r.left+","+r.top+")"),v=d.append("g").attr("class","context").attr("transform","translate("+o.left+","+o.top+")"),g=0,p=0,m=we.scaleBand().range([0,l]).padding(.1),f=we.scaleLinear().range([c,0]),b=we.scaleBand().range([0,l]).padding(.1),y=we.scaleLinear().range([h,0]),_=we.axisBottom(m).tickSize(0),w=(we.axisBottom(b).tickSize(0),we.axisLeft(f)),S=we.brushX().extent([[0,0],[l,h]]).on("brush end",H);p=s,g=s.map((function(e){return e.key})),m.domain(s.map((function(e){return e.key}))),f.domain([0,we.max(s,(function(e){return e.value}))]),b.domain(m.domain()),y.domain(f.domain());var x=z(u,s),D=x[0],T=x[1],C=x[2],k=x[3],Z=v.selectAll("rect").data(s).enter().append("rect");function z(e,t){return D=e.selectAll("rect").data(t).enter().append("rect"),T=D.attr("class","bar").attr("x",(function(e){return m(e.key)})).attr("y",(function(e){return f(e.value)})).attr("width",m.bandwidth()).attr("height",(function(e){return c-f(e.value)})).attr("fill","steelblue"),C=e.append("g").attr("class","axis axis--x").attr("transform","translate(0,"+c+")").call(_).selectAll("text").style("text-anchor","start").attr("dx","+.8em").attr("dy","+.1em").attr("transform","rotate(-90)"),k=e.append("g").attr("class","axis axis--y").call(w),e.append("text").style("font","10px arial").attr("transform","rotate(-90)").attr("y",0-r.left).attr("x",0-c/2).attr("dy","2em").style("text-anchor","middle").text("Frequency"),[D,T,C,k]}function H(){if(!we.event.sourceEvent||"zoom"!==we.event.sourceEvent.type){T.remove(),C.remove(),k.remove();var e=we.event.selection||b.range(),t=g.slice(Math.round(e[0]/b.step()),Math.round(e[1]/b.step()));m.domain(t),console.log(t);var s=we.select(this).node().parentElement.parentElement.parentElement.id;"div_node_overview"==s?(a.brushed["entity_type"]=t,a.brushed["relationship_type"]=[],a.toggleOverviewPanel("entity")):"div_link_overview"==s?(a.brushed["relationship_type"]=t,a.brushed["entity_type"]=[],a.toggleOverviewPanel("relationship")):alert("error finding container");var n=p.slice(Math.round(e[0]/b.step()),Math.round(e[1]/b.step())),i=z(u,n);D=i[0],T=i[1],C=i[2],k=i[3],u.select("bar").attr("d",D),u.select("axis axis--x").call(_)}}Z.attr("class","bar").attr("x",(function(e){return b(e.key)})).attr("y",(function(e){return y(e.value)})).attr("width",b.bandwidth()).attr("height",(function(e){return h-y(e.value)})).attr("fill","steelblue"),u.append("path").datum(s).attr("class","bar").attr("d",D),v.append("path").datum(s).attr("class","bar").attr("d",Z),v.append("g").attr("class","axis axis--x").attr("transform","translate(0,"+h+")"),v.append("g").attr("class","brush").call(S).call(S.move,m.range()),d.append("rect").attr("width",l).attr("height",c).attr("transform","translate("+r.left+","+r.top+")").attr("fill","none")},toggleOverviewPanel:function(e){if("entity"==e){var t=document.querySelector("#div_node_overview"),a=document.querySelector("#div_link_overview");t.style.border="2px solid green",a.style.border="None"}else{var s=document.querySelector("#div_link_overview"),n=document.querySelector("#div_node_overview");s.style.border="2px solid green",n.style.border="None"}},retrieve_types_nodes:function(){this.$store.dispatch("retrieveNodesLinksWithTypes",this.brushed)}},watch:{graphOverview:function(){console.log("tuymeieeeeee",this.graphOverview);var e=this.graphOverview["data"]["entity"],t=this.graphOverview["data"]["relationship"];console.log("fff",e,t),this.drawBarChart("#div_link_overview",t),this.drawBarChart("#div_node_overview",e)},graphData:function(){console.log(this.graphData),this.graphData["results"][0]["data"][0]["graph"]["nodes"].forEach((function(e){e["status"]="unclicked"})),console.log("check graph data"),console.log(this.graphData),Se._2(this.graphData,this.currentEntities,this.currentRelations),this.drawNeo4jd3()},selectedEntities:function(e){e.length>0&&(console.log("retrieving data now!!!"),console.log(e.length),console.log(this.selectedEntities),console.log(this.selectedRelations),console.log("****************"),console.log(e),this.$store.dispatch("retrieveSubTable",{entities:this.selectedEntities,relations:this.selectedRelations}),this.$store.dispatch("retrieveNodeGeo",{node:this.selectedEntities}))},selectedRelations:function(e){e.length>0&&(console.log("****************"),console.log(e.length),console.log(e),console.log("retrieving data now!!!"),console.log(this.selectedEntities),console.log(this.selectedRelations),this.$store.dispatch("retrieveSubTable",{entities:this.selectedEntities,relations:this.selectedRelations}))},brushed:{handler:function(e){console.log(e)},deep:!0},relationStatusReady:function(e){console.log("relation status: "+e)},relationTypeData:function(e){this.relationStatusReady?console.log("relation type data is ready"):console.log("relation type data is not ready yet!")},loading:function(e){this.loading_value=e}},beforeMounted:function(){},mounted:function(){},computed:(0,i.Z)((0,i.Z)({},(0,l.rn)(["graphData","relationStatusReady","relationTypeData","loading","graphOverview"])),{},{HEIGHT:function(){return.7*window.innerHeight+"px"},OVERVIEW_HEIGHT:function(){return.3*window.innerHeight+"px"}})},Te=De,Ce=a(1058),ke=a(624),Ze=a(7611),ze=(0,v.Z)(Te,me,fe,!1,null,null,null),He=ze.exports;p()(ze,{VBtn:m.Z,VCol:D.Z,VIcon:f.Z,VOverlay:Ce.Z,VProgressCircular:ke.Z,VRow:T.Z,VSlider:Ze.Z});var Ie={components:{CTemplate:te,KgViewerCore:He}},Ee=Ie,Me=(0,v.Z)(Ee,ge,pe,!1,null,null,null),Ve=Me.exports,Le={components:{MenuBar:k,TemplateTable:ve,TemplateKG:Ve},methods:{dragOver:function(e){return e.preventDefault(),!1},dropHandler:function(e){var t=e.clientX,a=e.clientY;if(!e.dataTransfer.getData("item-id"))return!1;var s=e.dataTransfer.getData("initialLeft"),n=e.dataTransfer.getData("initialTop"),i=e.dataTransfer.getData("item-id"),r=(document.querySelector("#".concat(i)),t+parseInt(s)),o=a+parseInt(n);return console.log(this.currentDragging),this.currentDragging&&(console.log(this.currentDragging),this.currentDragging.marginLeft=r,this.currentDragging.marginTop=o),e.preventDefault(),!1}},computed:(0,i.Z)({},(0,l.rn)(["currentDragging"]))},Re=Le,Ne=(0,v.Z)(Re,s,n,!1,null,null,null),$e=Ne.exports}}]);
//# sourceMappingURL=457-legacy.cb0c730f.js.map