"use strict";(self["webpackChunknew_gui"]=self["webpackChunknew_gui"]||[]).push([[457],{5457:function(e,t,a){a.r(t),a.d(t,{default:function(){return Le}});var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashboard-beta-container",on:{dragover:e.dragOver,drop:e.dropHandler}},[a("menu-bar"),a("TemplateTable"),a("TemplateKG")],1)},i=[],r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-card",{staticClass:"dashboard-menu",attrs:{outlined:""}},e._l(e.menu.menuList,(function(e){return a("v-row",{key:e.label,attrs:{"no-gutters":""}},[a("v-col",[a("MenuBtn",{attrs:{item:e}})],1)],1)})),1)],1)},n=[],l=a(629),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var s=t.on,i=t.attrs;return[a("v-btn",{staticClass:"ma-2 menu-btn",attrs:{icon:"",text:"",draggable:"true"},on:{dblclick:e.addCards}},[a("v-icon",e._g(e._b({},"v-icon",i,!1),s),[e._v(" "+e._s(e.item.icon)+" ")])],1)]}}])},[a("span",[e._v(e._s(e.item.label))])])],1)},c=[],h={data(){return{}},props:["item"],methods:{addCards(){console.log("adding"+this.item.store)}}},d=h,u=a(3736),v=a(3453),g=a.n(v),p=a(3150),m=a(6428),b=a(9330),f=(0,u.Z)(d,o,c,!1,null,null,null),y=f.exports;g()(f,{VBtn:p.Z,VIcon:m.Z,VTooltip:b.Z});var _={data(){return{items:[]}},computed:{...(0,l.rn)(["menu"])},components:{MenuBtn:y},created(){console.log(this.menu)}},w=_,S=a(3237),x=a(2102),D=a(2877),T=(0,u.Z)(w,r,n,!1,null,"2680bb25",null),C=T.exports;g()(T,{VCard:S.Z,VCol:x.Z,VRow:D.Z});var k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-hover",{scopedSlots:e._u([{key:"default",fn:function(t){var s=t.hover;return[a("v-card",{ref:"cardComp",staticClass:"card-tabular",style:{top:e.marginTop+"px",left:e.marginLeft+"px",width:e.width+"px",height:e.height+"px",position:"absolute"},attrs:{elevation:s?12:5,draggable:e.draggable,outlined:"",id:e.componentId},on:{dragstart:e.dragStart,contextmenu:e.rightClickMenuShow,dblclick:e.printCorpus}},[[e.dataStatus?e._e():a("v-card-text",{staticClass:"card-name"},[e._v(" No Table Data ")]),e.dataStatus?a("div",[a("v-tabs",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.sheetNames,(function(t){return a("v-tab",{key:t},[e._v(" "+e._s(t)+" ")])})),1),a("v-tabs-items",{ref:"tabletabs",model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.sheetNames,(function(t){return a("v-tab-item",{key:t},[a("v-data-table",{staticClass:"elevation-1",attrs:{height:e.height-50-70-150+"px",loading:e.loadingStatus,"show-select":"",headers:e.convert(e.currentData["data"][t]["tableInfo"]),items:e.currentData["data"][t]["tableData"],"item-key":e.sheetItemKey,"single-select":e.singleSelect,search:e.search,"custom-filter":e.filterOnlyCapsText},on:{"item-selected":e.itemSelectedHandler,"toggle-select-all":e.selectAllHandler},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-text-field",{staticClass:"mx-4",staticStyle:{"margin-top":"3px"},attrs:{label:"Search (UPPER CASE ONLY)"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]},proxy:!0},{key:"footer",fn:function(){return[a("v-container",[a("v-row",{attrs:{justify:"space-between"}},[a("v-col",{attrs:{cols:"3"}},[a("v-text-field",{staticStyle:{width:"80px"},attrs:{type:"number",label:"Less than"},model:{value:e.calories,callback:function(t){e.calories=t},expression:"calories"}})],1),a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{cols:"3"}},[a("v-btn",{on:{click:e.retrieveGraphFromTableHandler}},[e._v(" Retrieve ")])],1)],1)],1)]},proxy:!0}],null,!0),model:{value:e.selected_rows,callback:function(t){e.selected_rows=t},expression:"selected_rows"}})],1)})),1)],1):e._e()],a("div",{staticClass:"resizer resizer-r",on:{mousedown:e.mouseDownHandler}}),a("div",{staticClass:"resizer resizer-b",on:{mousedown:e.mouseDownHandler}})],2)]}}])})],1)},z=[],H={data(){return{initialX:void 0,initialY:void 0,dataStatus:!1,resizeX:void 0,resizeY:void 0,width:500,height:600,resizeWidth:0,resizeHeight:0,marginTop:0,marginLeft:0,topMargin:window.innerHeight/2,leftMargin:window.innerWidth/2,resizingStatus:!1,ff:!1,rightMenuX:0,rightMenuY:0,loadingStatus:void 0,componentId:"tabular-0",items:[{title:"Remove node"}],container:".documents-components-list",selected:[],sheets:[],currentDataBase:[],answerBasedRetrieval:{},flag:!1,tableItemKey:"",search:"",calories:"",desserts:[],headers:[],selected_rows:[],singleSelect:!1,sheetNames:[],tab:null,sheetItemKey:null,currentSheet:null,currentData:null}},methods:{dragStart(e){const t=document.querySelector(`#${e.target.id}`),a=parseInt(t.style.left.split("px")[0])-e.clientX,s=parseInt(t.style.top.split("px")[0])-e.clientY;e.dataTransfer.setData("item-id",e.target.id),e.dataTransfer.setData("initialLeft",a),e.dataTransfer.setData("initialTop",s),this.$store.dispatch("changeCurrentDraggingVM",this)},mouseDownHandler(e){this.resizeX=e.clientX,this.resizeY=e.clientY,document.addEventListener("mousemove",this.mouseMoveHandler),document.addEventListener("mouseup",this.mouseUpHandler),this.resizingStatus=!0},mouseMoveHandler(e){const t=e.clientX-this.resizeX,a=e.clientY-this.resizeY;this.width=this.resizeWidth+t,this.height=this.resizeHeight+a},mouseUpHandler(e){this.resizeWidth=this.width,this.resizeHeight=this.height,document.removeEventListener("mousemove",this.mouseMoveHandler),document.removeEventListener("mouseup",this.mouseUpHandler),this.resizingStatus=!1},rightClickMenuShow(e){e.preventDefault(),this.showRightClickMenu=!0,this.rightMenuX=e.clientX,this.rightMenuY=e.clientY},printCorpus(){console.log(this.itemProps)},toggleSheet(e){this.currentSheet!=e&&(this.currentSheet=e,this.sheetDataUpdate(this.currentSheet))},sheetDataUpdate(e){const t=this.itemProps.inputData,a=t["data"][e];if(this.headers=[],Object.keys(a).length>0){for(let e of Object.keys(a[0]))this.headers.push({text:e.charAt(0).toUpperCase()+e.slice(1),value:e});this.tableItemKey=this.headers[0]["value"],this.currentDataBase=Object.values(a),this.desserts=Object.values(a)}},filterOnlyCapsText(e,t,a){return console.log(e,t,a),null!=e&&null!=t&&"string"===typeof e&&-1!==e.toString().indexOf(t)},convert(e){let t=[];return e.forEach((e=>{let a={text:e["label"],value:e["value"]};t.push(a)})),t},itemSelectedHandler({item:e,value:t}){t?this.$store.dispatch("setTableSelected",{action:"add",sheetName:this.currentSheet,value:[e]}):this.$store.dispatch("setTableSelected",{action:"remove",sheetName:this.currentSheet,value:[e]})},retrieveGraphFromTableHandler(){this.$store.dispatch("retrieveGraphFromTable")},selectAllHandler({items:e,value:t}){console.log(e,t),t?this.$store.dispatch("setTableSelected",{action:"add",sheetName:this.currentSheet,value:e}):this.$store.dispatch("setTableSelected",{action:"remove",sheetName:this.currentSheet,value:e})},updateItemKey(){if(this.currentSheet=this.currentData["sheet"][this.tab],null==this.currentSheet)return;const e=this.currentData["data"][this.currentSheet]["tableData"][0];if(e){const t=Object.keys(e);console.log("check =================== here!!!"),console.log(e),console.log(this.currentSheet),t.includes("relation_id")?this.sheetItemKey="relation_id":t.includes("id")&&(this.sheetItemKey="id")}}},created(){this.$store.dispatch("getTableData"),this.marginTop=this.topMargin-this.height/2,this.marginLeft=this.leftMargin-this.width/2,this.resizeWidth=this.width,this.resizeHeight=this.height},computed:{...(0,l.rn)(["tableData","tableSelection","tableSelected","tableInteractiveMode","interactiveTableData"]),draggable(){return!this.resizingStatus}},components:{},watch:{tableData(){this.tableInteractiveMode||(this.dataStatus=!0,this.sheetNames=this.tableData["sheet"],console.log("check here!!!"),console.log(this.tableData),this.currentData=this.tableData,null==this.tab&&(this.tab=0),this.updateItemKey())},tableInteractiveMode(){this.tableInteractiveMode||(this.currentData=this.tableData,this.sheetNames=this.currentData["sheet"],null==this.tab&&(this.tab=0),this.updateItemKey(),this.selected_rows=[])},interactiveTableData(){console.log(this.interactiveTableData),this.tableInteractiveMode&&(this.dataStatus=!0,this.interactiveTableData["sheet"].length>0?(this.currentData=this.interactiveTableData,this.sheetNames=this.currentData["sheet"],null==this.tab&&(this.tab=0),this.updateItemKey(),this.selected_rows=[]):(alert("Nothing retrieved from table!"),this.selected_rows=[]))},tab(){console.log(this.currentData),null!=this.currentData&&this.updateItemKey(),console.log(this.sheetItemKey)},dataStatus:function(e,t){if(e){const e=document.querySelector("#"+this.componentId).querySelector(".resizer-b"),t=25;e.style.bottom=-t-12+"px"}},marginTop(e){console.log(e)}}},I=H,Z=a(4589);const E=(0,Z.Ji)("v-card__actions"),M=(0,Z.Ji)("v-card__subtitle"),V=(0,Z.Ji)("v-card__text"),$=(0,Z.Ji)("v-card__title");S.Z;var L=a(9846),R=a(4998),N=a(4561),P=a(2936),O=a(3325),K=a(1824),B=(0,O.Z)(N.Z,P.Z).extend({name:"v-hover",props:{disabled:{type:Boolean,default:!1},value:{type:Boolean,default:void 0}},methods:{onMouseEnter(){this.runDelay("open")},onMouseLeave(){this.runDelay("close")}},render(){if(!this.$scopedSlots.default&&void 0===this.value)return(0,K.Kd)("v-hover is missing a default scopedSlot or bound value",this),null;let e;return this.$scopedSlots.default&&(e=this.$scopedSlots.default({hover:this.isActive})),Array.isArray(e)&&1===e.length&&(e=e[0]),e&&!Array.isArray(e)&&e.tag?(this.disabled||(e.data=e.data||{},this._g(e.data,{mouseenter:this.onMouseEnter,mouseleave:this.onMouseLeave})),e):((0,K.Kd)("v-hover should only contain a single element",this),e)}}),A=a(4227),j=a(1759),Y=a(7090),X=a(1954),G=a(5978),W=(0,u.Z)(I,k,z,!1,null,"219ca263",null);W.exports;g()(W,{VBtn:p.Z,VCard:S.Z,VCardText:V,VCol:x.Z,VContainer:L.Z,VDataTable:R.Z,VHover:B,VRow:D.Z,VTab:A.Z,VTabItem:j.Z,VTabs:Y.Z,VTabsItems:X.Z,VTextField:G.Z});var q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-hover",{scopedSlots:e._u([{key:"default",fn:function(t){var s=t.hover;return[a("v-card",{ref:"cardComp",staticClass:"card-tabular",style:{top:e.marginTop+"px",left:e.marginLeft+"px",width:e.width+"px",height:e.height+"px",position:"absolute"},attrs:{elevation:s?12:5,draggable:e.draggable,outlined:"",id:e.componentId},on:{dragstart:e.dragStart,contextmenu:e.rightClickMenuShow}},[e._t("core",(function(){return[a("v-card-text",{staticClass:"card-name"},[e._v(" Empty Container ")])]})),a("div",{staticClass:"resizer resizer-r",on:{mousedown:e.mouseDownHandler}}),a("div",{staticClass:"resizer resizer-b",on:{mousedown:e.mouseDownHandler}})],2)]}}],null,!0)})],1)},U=[],F={data(){return{dataStatus:!1,resizeX:void 0,resizeY:void 0,width:500,height:1e3,resizeWidth:0,resizeHeight:0,marginTop:0,marginLeft:0,topMargin:window.innerHeight/2,leftMargin:window.innerWidth/2,resizingStatus:!1,rightMenuX:0,rightMenuY:0,loadingStatus:void 0,componentId:"tabular-0",items:[{title:"Remove node"}],container:".documents-components-list",selected:[],sheets:[],currentDataBase:[],answerBasedRetrieval:{},flag:!1,tableItemKey:"",search:"",calories:"",desserts:[],headers:[],selected_rows:[],singleSelect:!1,sheetNames:[],tab:null,sheetItemKey:null,currentSheet:null,currentData:null}},methods:{dragStart(e){const t=document.querySelector(`#${e.target.id}`),a=parseInt(t.style.left.split("px")[0])-e.clientX,s=parseInt(t.style.top.split("px")[0])-e.clientY;e.dataTransfer.setData("item-id",e.target.id),e.dataTransfer.setData("initialLeft",a),e.dataTransfer.setData("initialTop",s),this.$store.dispatch("changeCurrentDraggingVM",this)},mouseDownHandler(e){this.resizeX=e.clientX,this.resizeY=e.clientY,document.addEventListener("mousemove",this.mouseMoveHandler),document.addEventListener("mouseup",this.mouseUpHandler),this.resizingStatus=!0},mouseMoveHandler(e){const t=e.clientX-this.resizeX,a=e.clientY-this.resizeY;this.width=this.resizeWidth+t,this.height=this.resizeHeight+a},mouseUpHandler(e){this.resizeWidth=this.width,this.resizeHeight=this.height,document.removeEventListener("mousemove",this.mouseMoveHandler),document.removeEventListener("mouseup",this.mouseUpHandler),this.resizingStatus=!1},rightClickMenuShow(e){e.preventDefault(),this.showRightClickMenu=!0,this.rightMenuX=e.clientX,this.rightMenuY=e.clientY}},created(){this.marginTop=50,this.marginLeft=100,this.resizeWidth=this.width,this.resizeHeight=this.height},computed:{draggable(){return!this.resizingStatus}},components:{},watch:{height(e){this.$store.dispatch("containerSizeChange",{container:"tableContainer",height:this.height})}}},J=F,Q=(0,u.Z)(J,q,U,!1,null,"8ea166f8",null),ee=Q.exports;g()(Q,{VCard:S.Z,VCardText:V,VHover:B});var te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("CTemplate",{scopedSlots:e._u([{key:"core",fn:function(){return[a("TableViewerCore")]},proxy:!0}])})},ae=[],se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{id:"inspire"}},[a("div",{staticClass:"tmp"},[a("v-tabs",{model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.sheetNames,(function(t){return a("v-tab",{key:t},[e._v(" "+e._s(t)+" ")])})),1),a("v-tabs-items",{ref:"tabletabs",model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},e._l(e.sheetNames,(function(t){return a("v-tab-item",{key:t},[a("v-data-table",{staticClass:"elevation-1",attrs:{height:e.height-50-70-170+"px","show-select":"",headers:e.convert(e.currentData["data"][t]["tableInfo"]),items:e.currentData["data"][t]["tableData"],"item-key":e.sheetItemKey,"single-select":e.singleSelect,search:e.search,"custom-filter":e.filterOnlyCapsText},on:{"item-selected":e.itemSelectedHandler,"toggle-select-all":e.selectAllHandler},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-text-field",{staticClass:"mx-4",staticStyle:{"margin-top":"3px"},attrs:{label:"Search (UPPER CASE ONLY)"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]},proxy:!0},{key:"footer",fn:function(){return[a("v-container",[a("v-row",{attrs:{justify:"space-between"}},[a("v-col",{attrs:{cols:"3"}},[a("v-text-field",{staticStyle:{width:"80px"},attrs:{type:"number",label:"Less than"},model:{value:e.calories,callback:function(t){e.calories=t},expression:"calories"}})],1),a("v-col",{staticStyle:{"margin-top":"20px"},attrs:{cols:"3"}},[a("v-btn",{on:{click:e.retrieveGraphFromTableHandler}},[e._v(" Retrieve ")])],1)],1)],1)]},proxy:!0}],null,!0),model:{value:e.selected_rows,callback:function(t){e.selected_rows=t},expression:"selected_rows"}})],1)})),1)],1)])},ie=[],re={data(){return{search:"",calories:"",desserts:[],headers:[],selected_rows:[],singleSelect:!1,sheetNames:[],tab:null,sheetItemKey:null,currentSheet:null,currentData:null,height:1e3}},computed:{...(0,l.rn)(["tableData","tableSelection","tableSelected","tableInteractiveMode","interactiveTableData","tableContainer"]),windowHeight(){return window.innerHeight-350+"px"}},beforeCreate(){this.height=this.tableContainer.height,console.log(this.height)},created(){this.$store.dispatch("getTableData"),this.height=this.tableContainer.height},methods:{filterOnlyCapsText(e,t,a){return console.log(e,t,a),null!=e&&null!=t&&"string"===typeof e&&-1!==e.toString().indexOf(t)},convert(e){let t=[];return e.forEach((e=>{let a={text:e["label"],value:e["value"]};t.push(a)})),t},itemSelectedHandler({item:e,value:t}){t?this.$store.dispatch("setTableSelected",{action:"add",sheetName:this.currentSheet,value:[e]}):this.$store.dispatch("setTableSelected",{action:"remove",sheetName:this.currentSheet,value:[e]})},retrieveGraphFromTableHandler(){this.$store.dispatch("retrieveGraphFromTable")},selectAllHandler({items:e,value:t}){console.log(e,t),t?this.$store.dispatch("setTableSelected",{action:"add",sheetName:this.currentSheet,value:e}):this.$store.dispatch("setTableSelected",{action:"remove",sheetName:this.currentSheet,value:e})},updateItemKey(){if(this.currentSheet=this.currentData["sheet"][this.tab],null==this.currentSheet)return;const e=this.currentData["data"][this.currentSheet]["tableData"][0];if(e){const t=Object.keys(e);console.log("check =================== here!!!"),console.log(e),console.log(this.currentSheet),t.includes("relation_id")?this.sheetItemKey="relation_id":t.includes("id")&&(this.sheetItemKey="id")}}},watch:{tableData(){this.tableInteractiveMode||(this.sheetNames=this.tableData["sheet"],console.log("check here!!!"),console.log(this.tableData),this.currentData=this.tableData,null==this.tab&&(this.tab=0),this.updateItemKey())},tableInteractiveMode(){this.tableInteractiveMode||(this.currentData=this.tableData,this.sheetNames=this.currentData["sheet"],null==this.tab&&(this.tab=0),this.updateItemKey(),this.selected_rows=[])},interactiveTableData(){console.log(this.interactiveTableData),this.tableInteractiveMode&&(this.interactiveTableData["sheet"].length>0?(this.currentData=this.interactiveTableData,this.sheetNames=this.currentData["sheet"],null==this.tab&&(this.tab=0),this.updateItemKey(),this.selected_rows=[]):(alert("Nothing retrieved from table!"),this.selected_rows=[]))},tab(){console.log(this.currentData),null!=this.currentData&&this.updateItemKey(),console.log(this.sheetItemKey)},"tableContainer.height":function(e,t){console.log(this.height),this.height=this.tableContainer.height}}},ne=re,le=(0,u.Z)(ne,se,ie,!1,null,null,null),oe=le.exports;g()(le,{VBtn:p.Z,VCol:x.Z,VContainer:L.Z,VDataTable:R.Z,VRow:D.Z,VTab:A.Z,VTabItem:j.Z,VTabs:Y.Z,VTabsItems:X.Z,VTextField:G.Z});var ce={data(){return{containerId:"tableContainer"}},components:{CTemplate:ee,TableViewerCore:oe}},he=ce,de=(0,u.Z)(he,te,ae,!1,null,null,null),ue=de.exports,ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("c-template",{scopedSlots:e._u([{key:"core",fn:function(){return[a("KgViewerCore")]},proxy:!0}])})},ge=[],pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fullHeight",staticStyle:{position:"relative"}},[a("div",{staticClass:"graph-btn-container"},[a("v-row",{attrs:{"no-gutters":"",justify:"space-between"}},[a("v-col",{key:"0",attrs:{sm:"3",cols:"2"}},[a("v-btn",{staticClass:"kg-view-btn",attrs:{small:""},on:{click:e.resetGraphTableHandler}},[e._v(" Reset ")]),a("v-btn",{staticClass:"kg-view-btn",attrs:{small:"",color:e.zoomPanColor},on:{click:e.zoomPanToggleHandler}},[a("v-icon",[e._v(" mdi-arrow-expand-all ")])],1),a("v-btn",{staticClass:"kg-view-btn",attrs:{small:"",color:e.lassoColor},on:{click:e.lassoToggleHandler}},[a("v-icon",[e._v(" mdi-lasso ")])],1)],1),a("v-col",{key:"1",attrs:{cols:"4",sm:"3"}},[a("v-slider",{attrs:{"thumb-size":24,"thumb-label":"always"},on:{click:e.changeThreshold},model:{value:e.user_defined_thre,callback:function(t){e.user_defined_thre=t},expression:"user_defined_thre"}})],1),a("v-col",{key:"2",attrs:{cols:"1",sm:"3"}},[a("v-btn",{staticClass:"retrieve-type-node-btn",attrs:{small:""},on:{click:e.retrieve_types_nodes}},[e._v(" Retrieve ")])],1)],1)],1),a("v-row",{style:{height:e.OVERVIEW_HEIGHT,"margin-top":"20px"}},[a("v-col",{attrs:{cols:"6"}},[a("div",{attrs:{id:"div_node_overview"}})]),a("v-col",{attrs:{cols:"6"}},[a("div",{attrs:{id:"div_link_overview"}})])],1),a("div",{staticClass:"fullHeight",style:{height:e.HEIGHT},attrs:{id:"div_graph"}}),a("v-overlay",{attrs:{value:e.loading_value}},[a("v-progress-circular",{attrs:{indeterminate:"",size:"64"}})],1)],1)},me=[],be=a(8722),fe=a(3469),ye=a(682),_e=a(3938),we=a(2695),Se={components:{},data(){return{selectedEntities:[],selectedRelations:[],currentEntities:[],currentRelations:[],lassoColor:"grey",zoomPanColor:"green",lassoStatus:!1,zoomPanStatus:!0,lasso:null,zoom:null,loading_value:!1,tip:null,user_defined_thre:5,neo4jd3:null,brushed:{entity_type:[],relationship_type:[]}}},created(){this.$store.dispatch("getGraphOverview"),window["d3"]=ye,this.tip=we().attr("class","d3-tip").offset([-10,80]).html((function(e){return"<strong>Relation: </strong>"+e+"<br></span>"})),console.log(document.querySelector("#div_graph"))},methods:{changeThreshold(){this.$store.dispatch("setExpandTh",this.user_defined_thre)},drawNeo4jd3(){var e=this;if(ye.selectAll(".d3-tip").remove(),null==this.neo4jd3){var t=be.Z("#div_graph",{neo4jData:this.graphData,nodeRadius:30,infoPanel:!1,onNodeDoubleClick:function(e){},onNodeMouseEnter:function(t){e.hover_node=t},onNodeClick:function(t,a){if(console.log(t),1==t.showBtnPanel)return ye.select(`#node-${t.id}`).selectAll(".circle-button").remove(),void(t.showBtnPanel=!1);t.showBtnPanel=!0;var s={b:{action:"remove",value:10,pos:0}};if(0==e.relationStatusReady)console.log("nononono");else{console.log(e.relationTypeData["results"][0]["data"][0]["graph"]["nodes"]),console.log(a);let i=e.relationTypeData["results"][0]["data"][0]["graph"]["nodes"].filter((e=>e.id==t.id)),r=i[0]["relationship_types"];const n=e=>Object.values(e).reduce(((e,t)=>e+t)),l=n(r);for(const[e,t]of Object.entries(r))s[e]={action:e,value:t/l*30};console.log("check data"),console.log(s)}let i=ye.select(`#node-${t.id}`),r=i;var n=ye.pie().sort(null).value((function(e){return e.value.value})),l=n(ye.entries(s)),o=r.selectAll("whatever").data(l).enter(),c=o.append("path").attr("d",ye.arc().innerRadius(30).outerRadius(50)).attr("class","circle-button").attr("fill",(function(e,t){return 0==t?"#BB6464":"#94B49F"})).style("stroke-width","2px").style("stroke","white").style("opacity",.7).style("cursor","pointer").attr("title","test");o.append("path").attr("d","M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M7,13H17V11H7").attr("transform","translate(20, -35) scale(0.7)").attr("class","circle-button");ye.select("svg").call(e.tip),c.on("mouseover",(function(t){ye.select(this).style("opacity",1);let a=t["data"]["value"]["action"];console.log(a),e.tip.show(a)})).on("mouseout",(function(t){ye.select(this).style("opacity",.7);let a=t["data"]["value"]["action"];e.tip.hide(a)})).on("click",(function(a,s){let i=t["id"];const r=a.data.value.action;console.log(a),e.tip.hide(a.data.value.action),"remove"==r?e.$store.dispatch("node_remove",{node_id:i}):(console.log(a.data.value.action),e.$store.dispatch("node_expand",{node_id:i,relation:a.data.key}))}))}});this.neo4jd3=t}else this.neo4jd3.updateWithNeo4jData(this.graphData);window.neo4jd3=this.neo4jd3,window.graph=this.graphData,e.lassoStatus?(e.disableZoom(),e.enableLasso()):(e.disableLasso(),e.enableZoomPan())},resetGraphTableHandler(){this.$store.dispatch("resetTableGraph")},toggleZoomPanLasso(){this.zoomPanStatus=!this.zoomPanStatus,this.lassoStatus=!this.lassoStatus,this.zoomPanColor=this.zoomPanStatus?"green":"grey",this.lassoColor=this.lassoStatus?"green":"grey"},zoomPanToggleHandler(){this.zoomPanStatus||(this.toggleZoomPanLasso(),this.disableLasso(),this.enableZoomPan())},lassoToggleHandler(){this.lassoStatus||(this.toggleZoomPanLasso(),this.disableZoom(),this.enableLasso())},enableLasso(){const e=ye.select("#div_graph").select("svg");var t=e.selectAll(".outline");let a=this;var s=function(){console.log(111),n.items().attr("fill","green").classed("not_possible",!0).classed("selected",!1)},i=function(){n.possibleItems().classed("not_possible",!1).classed("possible",!0),n.notPossibleItems().classed("not_possible",!0).classed("possible",!1)},r=function(){n.items().classed("not_possible",!1).classed("possible",!1),n.selectedItems().classed("selected",!0),a.selectedEntities.splice(0,a.selectedEntities.length),a.selectedRelations.splice(0,a.selectedRelations.length),n.selectedItems().each((function(e){const t=this.nodeName;"circle"==t?(console.log("adding entity"+e.id),a.selectedEntities.push(e.id)):(console.log("adding Relations"+e.id),a.selectedRelations.push(e.id))}))},n=fe.lasso().closePathSelect(!0).closePathDistance(100).items(t).targetArea(e).on("start",s).on("draw",i).on("end",r);e.call(n)},disableLasso(){const e=ye.select("#div_graph").select("svg");e.on(".dragstart",null),e.on(".drag",null),e.on(".dragend",null)},enableZoomPan(){const e=ye.select("#div_graph").select("svg");e.call(ye.zoom().on("zoom",(function(){var t=ye.event.transform.k,a=[ye.event.transform.x,ye.event.transform.y];console.log(1);const s=e.select("g");s.attr("transform","translate("+a[0]+", "+a[1]+") scale("+t+")")}))).on("dblclick.zoom",null)},disableZoom(){const e=ye.select("#div_graph").select("svg");e.on(".zoom",null)},drawBarChart(e,t){let a=this;var s=[];const i=Object.keys(t);for(var r=0;r<i.length;r++)s.push({key:i[r],value:t[i[r]]});s.sort(((e,t)=>e.value-t.value)),s.reverse();var n={top:20,right:30,bottom:90,left:70},l={top:230,right:30,bottom:10,left:70},o=window.innerWidth*(7/12)*.5-n.left-n.right,c=300-n.top-n.bottom,h=300-l.top-l.bottom,d=ye.select(e).append("svg").attr("width",o+n.left+n.right).attr("height",c+n.top+n.bottom),u=d.append("g").attr("class","focus").attr("transform","translate("+n.left+","+n.top+")"),v=d.append("g").attr("class","context").attr("transform","translate("+l.left+","+l.top+")"),g=0,p=0,m=ye.scaleBand().range([0,o]).padding(.1),b=ye.scaleLinear().range([c,0]),f=ye.scaleBand().range([0,o]).padding(.1),y=ye.scaleLinear().range([h,0]),_=ye.axisBottom(m).tickSize(0),w=(ye.axisBottom(f).tickSize(0),ye.axisLeft(b)),S=ye.brushX().extent([[0,0],[o,h]]).on("brush end",I);p=s,g=s.map((function(e){return e.key})),m.domain(s.map((function(e){return e.key}))),b.domain([0,ye.max(s,(function(e){return e.value}))]),f.domain(m.domain()),y.domain(b.domain());var x=H(u,s),D=x[0],T=x[1],C=x[2],k=x[3],z=v.selectAll("rect").data(s).enter().append("rect");function H(e,t){return D=e.selectAll("rect").data(t).enter().append("rect"),T=D.attr("class","bar").attr("x",(function(e){return m(e.key)})).attr("y",(function(e){return b(e.value)})).attr("width",m.bandwidth()).attr("height",(function(e){return c-b(e.value)})).attr("fill","steelblue"),C=e.append("g").attr("class","axis axis--x").attr("transform","translate(0,"+c+")").call(_).selectAll("text").style("text-anchor","start").attr("dx","+.8em").attr("dy","+.1em").attr("transform","rotate(-90)"),k=e.append("g").attr("class","axis axis--y").call(w),e.append("text").style("font","10px arial").attr("transform","rotate(-90)").attr("y",0-n.left).attr("x",0-c/2).attr("dy","2em").style("text-anchor","middle").text("Frequency"),[D,T,C,k]}function I(){if(ye.event.sourceEvent&&"zoom"===ye.event.sourceEvent.type)return;T.remove(),C.remove(),k.remove();var e=ye.event.selection||f.range(),t=g.slice(Math.round(e[0]/f.step()),Math.round(e[1]/f.step()));m.domain(t),console.log(t);const s=ye.select(this).node().parentElement.parentElement.parentElement.id;"div_node_overview"==s?(a.brushed["entity_type"]=t,a.brushed["relationship_type"]=[],a.toggleOverviewPanel("entity")):"div_link_overview"==s?(a.brushed["relationship_type"]=t,a.brushed["entity_type"]=[],a.toggleOverviewPanel("relationship")):alert("error finding container");var i=p.slice(Math.round(e[0]/f.step()),Math.round(e[1]/f.step())),r=H(u,i);D=r[0],T=r[1],C=r[2],k=r[3],u.select("bar").attr("d",D),u.select("axis axis--x").call(_)}z.attr("class","bar").attr("x",(function(e){return f(e.key)})).attr("y",(function(e){return y(e.value)})).attr("width",f.bandwidth()).attr("height",(function(e){return h-y(e.value)})).attr("fill","steelblue"),u.append("path").datum(s).attr("class","bar").attr("d",D),v.append("path").datum(s).attr("class","bar").attr("d",z),v.append("g").attr("class","axis axis--x").attr("transform","translate(0,"+h+")"),v.append("g").attr("class","brush").call(S).call(S.move,m.range()),d.append("rect").attr("width",o).attr("height",c).attr("transform","translate("+n.left+","+n.top+")").attr("fill","none")},toggleOverviewPanel(e){if("entity"==e){const e=document.querySelector("#div_node_overview"),t=document.querySelector("#div_link_overview");e.style.border="2px solid green",t.style.border="None"}else{const e=document.querySelector("#div_link_overview"),t=document.querySelector("#div_node_overview");e.style.border="2px solid green",t.style.border="None"}},retrieve_types_nodes(){this.$store.dispatch("retrieveNodesLinksWithTypes",this.brushed)}},watch:{graphOverview(){console.log("tuymeieeeeee",this.graphOverview);var e=this.graphOverview["data"]["entity"],t=this.graphOverview["data"]["relationship"];console.log("fff",e,t),this.drawBarChart("#div_link_overview",t),this.drawBarChart("#div_node_overview",e)},graphData(){console.log(this.graphData),this.graphData["results"][0]["data"][0]["graph"]["nodes"].forEach((function(e){e["status"]="unclicked"})),console.log("check graph data"),console.log(this.graphData),_e._2(this.graphData,this.currentEntities,this.currentRelations),this.drawNeo4jd3()},selectedEntities(e){e.length>0&&(console.log("retrieving data now!!!"),console.log(e.length),console.log(this.selectedEntities),console.log(this.selectedRelations),console.log("****************"),console.log(e),this.$store.dispatch("retrieveSubTable",{entities:this.selectedEntities,relations:this.selectedRelations}),this.$store.dispatch("retrieveNodeGeo",{node:this.selectedEntities}))},selectedRelations(e){e.length>0&&(console.log("****************"),console.log(e.length),console.log(e),console.log("retrieving data now!!!"),console.log(this.selectedEntities),console.log(this.selectedRelations),this.$store.dispatch("retrieveSubTable",{entities:this.selectedEntities,relations:this.selectedRelations}))},brushed:{handler(e){console.log(e)},deep:!0},relationStatusReady(e){console.log("relation status: "+e)},relationTypeData(e){this.relationStatusReady?console.log("relation type data is ready"):console.log("relation type data is not ready yet!")},loading(e){this.loading_value=e}},beforeMounted(){},mounted(){},computed:{...(0,l.rn)(["graphData","relationStatusReady","relationTypeData","loading","graphOverview"]),HEIGHT(){return.7*window.innerHeight+"px"},OVERVIEW_HEIGHT(){return.3*window.innerHeight+"px"}}},xe=Se,De=a(1058),Te=a(624),Ce=a(7611),ke=(0,u.Z)(xe,pe,me,!1,null,null,null),ze=ke.exports;g()(ke,{VBtn:p.Z,VCol:x.Z,VIcon:m.Z,VOverlay:De.Z,VProgressCircular:Te.Z,VRow:D.Z,VSlider:Ce.Z});var He={components:{CTemplate:ee,KgViewerCore:ze}},Ie=He,Ze=(0,u.Z)(Ie,ve,ge,!1,null,null,null),Ee=Ze.exports,Me={components:{MenuBar:C,TemplateTable:ue,TemplateKG:Ee},methods:{dragOver(e){return e.preventDefault(),!1},dropHandler(e){const t=e.clientX,a=e.clientY;if(!e.dataTransfer.getData("item-id"))return!1;const s=e.dataTransfer.getData("initialLeft"),i=e.dataTransfer.getData("initialTop"),r=e.dataTransfer.getData("item-id"),n=(document.querySelector(`#${r}`),t+parseInt(s)),l=a+parseInt(i);return console.log(this.currentDragging),this.currentDragging&&(console.log(this.currentDragging),this.currentDragging.marginLeft=n,this.currentDragging.marginTop=l),e.preventDefault(),!1}},computed:{...(0,l.rn)(["currentDragging"])}},Ve=Me,$e=(0,u.Z)(Ve,s,i,!1,null,null,null),Le=$e.exports}}]);
//# sourceMappingURL=457.73c70612.js.map