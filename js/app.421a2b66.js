(function(){"use strict";var e={5441:function(e,t,n){n.r(t)},7944:function(e,t,n){var a=n(144),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-app",[n("NavBar"),n("v-main",[n("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[n("keep-alive",[n("router-view")],1)],1)],1)],1)],1)},r=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-app-bar",{attrs:{app:"",dense:""}},[n("v-app-bar-nav-icon"),n("v-toolbar-title",[e._v("ICICLE Visual Analytics Prototype")]),n("v-spacer"),n("v-btn",{attrs:{text:"",rounded:"",color:"purple"},on:{click:e.versionSwitch}},[e._v(" "+e._s(e.versionPrompt)+" ")])],1)],1)},l=[],s=n(629),c={data(){return{}},methods:{versionSwitch(){const e=this.$route.name;e==this.DASH_ROUTE.name?this.$router.push(this.BETA_ROUTE.route):this.$router.push(this.DASH_ROUTE.route)}},computed:{...(0,s.rn)(["BETA_ROUTE","DASH_ROUTE"]),versionPrompt(){const e=this.$route.name;return e==this.DASH_ROUTE.name?"Try Dashboard Beta":"Old Version"}}},u=c,d=n(3736),p=n(3453),h=n.n(p),E=n(3343),_=n(5206),f=n(3150),T=n(9762),g=n(7921),m=(0,d.Z)(u,i,l,!1,null,null,null),v=m.exports;h()(m,{VAppBar:E.Z,VAppBarNavIcon:_.Z,VBtn:f.Z,VSpacer:T.Z,VToolbarTitle:g.qW});var A={data(){return{}},components:{NavBar:v}},b=A,D=n(7524),S=n(7877),y=(0,d.Z)(b,o,r,!1,null,null,null),O=y.exports;h()(y,{VApp:D.Z,VMain:S.Z});var N=n(6800);a.Z.use(N.Z);var I=new N.Z({}),R=n(8345);a.Z.use(R.Z);const L=[{path:"/",name:"Dashboard",component:()=>Promise.all([n.e(803),n.e(506)]).then(n.bind(n,5506))},{path:"/dashboard-beta",name:"DashboardBeta",component:()=>Promise.all([n.e(803),n.e(457)]).then(n.bind(n,5457))}],w=new R.Z({routes:L,base:"/"});var P=w,C=n(9669),G=n.n(C),B=(n(682),{state:{menuList:[{label:"Tabular",icon:"mdi-table",store:"documents"},{label:"Graph view",icon:"mdi-vector-polygon-variant",store:"graphview",component:void 0},{label:"Map view",icon:"mdi-earth-box",store:"ontology"}]}});function M(e){const t=Object.keys(e);let n=[],a=[];return t.forEach((t=>{const o=e[t],r=Object.values(o);r.forEach((e=>{null!=e.relation_id?a.push(e.relation_id):null!=e.id?n.push(e.id):console.log("Error, item doesn't have id or relation_id")}))})),{nodes:n,relations:a}}function U(e,t){if(t.length<=0)return-1;{const n=t[0],a=null!=n.relation_id?"relation_id":null!=n.id?"id":null;return t.forEach((t=>{const n=t[a];null!=n?null==e[n]&&(e[n]=t):(console.log(t),console.log(n),console.log(null!=n),console.log(a),console.log("Error: item doesn't have either id or relation_id"))})),1}}function k(e,t){if(t.length<=0)return-1;{const n=t[0],a=null!=n.relation_id?"relation_id":null!=n.id?"id":null;return t.forEach((t=>{const n=t[a];null!=n?null!=e[n]&&delete e[n]:console.log("Error: Item id: "+n+" is not in container")})),1}}function V(e,{sheets:t,data:n}){null==e?alert("container for id parsing is Null"):(e["relations"]={},e["entities"]={},t.forEach((t=>{const a=n[t]["tableData"];a.forEach((n=>{null!=n.relation_id?e["relations"][n.relation_id]={fromSheet:t,type:"relationship",data:n}:null!=n.id?e["entities"][n.id]={fromSheet:t,type:"entity",data:n}:console.log("Item no id or relation id")}))})))}function x(e,t,{entities:n,relations:a}){e["sheet"];let o={},r=[];return null==n&&null==a?null:(console.log("---===---===---===---==="),console.log(n),console.log(a),null!=n&&Object.keys(t["entities"]).length>0&&n.forEach((n=>{const a=t["entities"][n];if(null!=a){const t=a["fromSheet"];r.includes(t)||r.push(t),null!=o[t]?o[t]["tableData"].push(a["data"]):o[t]={tableData:[a["data"]],tableInfo:e["data"][t]["tableInfo"]}}else console.log(t["entities"]),console.log(t["entities"][n]),console.log("missing info from dictionary")})),null!=a&&Object.keys(t["relations"]).length>0&&a.forEach((n=>{const a=t["relations"][n];if(null!=a){const t=a["fromSheet"];r.includes(t)||r.push(t),null!=o[t]?o[t]["tableData"].push(a["data"]):o[t]={tableData:[a["data"]],tableInfo:e["data"][t]["tableInfo"]}}else console.log("missing info from dictionary")})),{data:o,sheet:r})}var Z=n(3938),F="https://vaapi.develop.tapis.io/";async function j(){const e=F+"g",t=Q(e,{204:"No content retrieved for initializing map",400:"Error in initializing map"});return t}async function H(e){const t=F+"getCountyInfo",n={node:e},a=Y(t,n,{204:"No content retrieved for selected node list",400:"Error in retrieve geo info for the selected nodes "});return a}async function Y(e,t,n){const a=await G().post(e,t),o=a.status;return console.log(o),"204"==o?(alert(n["204"]),null):"400"==o?(alert(n["400"]),null):a["data"]}async function Q(e,t){const n=await G().get(e),a=n.status;return"200"==a?n["data"]:"204"==a?(alert(t["204"]),null):(alert(t["400"]),null)}async function q(e){const t=F+"countyToNodes",n={county_id:e},a=await G().post(t,n);return a}function $(){return{BETA_ROUTE:{name:"DashboardBeta",route:"/dashboard-beta"},DASH_ROUTE:{name:"Dashboard",route:"/"},graphData:null,DATABASE_NAME:null,tableData:null,originalGraph:null,tableSelection:null,tableSelected:{},idDict:{},tableInteractiveMode:!1,interactiveTableData:null,relationStatusReady:!1,relationTypeData:null,loading:!1,us:null,expandThreshold:5,graphOverview:null,mapInitialInfo:null,mapQueryInfo:null,mapInQueryStatus:!1,activeTab:0,currentDragging:null,tableContainer:{height:1e3},colorMapping:{},base_request_url:"https://vaapi.develop.tapis.io/"}}a.Z.use(s.ZP);const W={SET_DATABASE_NAME(e,t){e.DATABASE_NAME=t},SET_graphOverview(e,t){e.graphOverview=t},SET_expandThreshold(e,t){e.expandThreshold=t},SET_graphData(e,t){e.graphData=t},SET_GRAPHDATA_RELATION_TYPE_DATA(e,t){e.relationTypeData=t},SET_graphDataBackUp(e,t){e.originalGraph=t},SET_tableData(e,t){e.tableData=t},SET_tableSelection(e,t){e.tableSelection=t},SET_TABLE_SELECTED_ADD(e,{sheetName:t,value:n}){console.log("!!!!!!!"),e.tableSelected[t]||(e.tableSelected[t]={}),U(e.tableSelected[t],n)},SET_TABLE_SELECTED_REMOVE(e,{sheetName:t,value:n}){k(e.tableSelected[t],n)},TABLE_INTERACTIVE_ON(e){e.tableInteractiveMode=!0},TABLE_INTERACTIVE_OFF(e){e.tableInteractiveMode=!1},RESET_TABLE_SELECTED(e){e.tableSelected={}},UPDATE_INTERACTIVE_TABLE(e,{entities:t,relations:n}){const a=x(e.tableData,e.idDict,{entities:t,relations:n});null!=a?e.interactiveTableData=a:alert("retrieve nothing")},RESET_GRAPHDATA(e){e.graphData=e.originalGraph},NODE_EXPAND(e,{updatedGraphData:t}){e.graphData=t},NODE_REMOVE(e,{updatedGraphData:t}){e.graphData=t},RELATION_STATUS_COUNTY(e){e.relationStatusReady="fromMap"},RELATION_STATUS_OFF(e){e.relationStatusReady=!1},RELATION_STATUS_ON(e){e.relationStatusReady=!0},SET_LOADING(e,t){e.loading=t},LOADIN_MAP(e,t){e.us=t},LOADIN_MAP_DATA(e,t){e.mapInitialInfo=t},MAP_IN_QUERY(e){e.mapInQueryStatus=!0},MAP_OFF_QUERY(e){e.mapInQueryStatus=!1},LOAD_QUERY_MAP_INFO(e,t){e.mapQueryInfo=t},ACTIVE_TAB(e,t){e.activeTab=t},SET_CRRENTDRAGGING(e,t){e.currentDragging=t},UPDATE_COLOR_MAPPING(e,{label:t,color:n}){e.colorMapping[t]=n}},z={async setExpandTh({commit:e,dispatch:t,state:n},a){e("SET_expandThreshold",a)},async getGraphData({commit:e,dispatch:t,state:n}){const a=n.base_request_url+"getGraphData";var o=await G().get(a);e("SET_graphData",o["data"]),e("SET_graphDataBackUp",o["data"])},async getGraphOverview({commit:e,dispatch:t,state:n}){G().get(n.base_request_url+"getGraphOverview").then((t=>{e("SET_graphOverview",t)}))},async getTableData({commit:e,dispatch:t,state:n}){const a=n.base_request_url+"getTableData";var o=await G().get(a),r={},i=o["data"]["sheet"],l=o["data"]["data"];i.forEach((e=>{r[e]=[]})),e("SET_tableSelection",r),e("SET_tableData",o["data"]),console.log("check table data again!!!"),console.log(o["data"]),V(n.idDict,{sheets:i,data:l})},setTableSelected({commit:e,displatch:t,state:n},{action:a,sheetName:o,value:r}){console.log(a),"add"==a?e("SET_TABLE_SELECTED_ADD",{sheetName:o,value:r}):"remove"==a?e("SET_TABLE_SELECTED_REMOVE",{sheetName:o,value:r}):console.log("Waring! setTableSelected action received an invalid action type: "+a)},retrieveGraphFromTable({commit:e,state:t}){console.log("retrieve graph data from table"),e("SET_LOADING",!0);let{nodes:n,relations:a}=M(t.tableSelected);const o=t.base_request_url+"retrieveSubgraph",r=t.base_request_url+"retrieveSubgraphWithR";e("RELATION_STATUS_OFF"),G().post(o,{nodes:n,relations:a}).then((t=>{console.log(t),e("SET_graphData",t["data"])})).catch((e=>{console.log(e),console.log(e.response.status)})),G().post(r,{nodes:n,relations:a}).then((t=>{console.log("!!!!!!1---------!!!!!!!!!!!! relation data back "),console.log(t),e("SET_LOADING",!1),e("SET_GRAPHDATA_RELATION_TYPE_DATA",t["data"]),e("RELATION_STATUS_ON")})).catch((e=>{console.log(e),console.log(e.response.status)}))},retrieveSubTable({commit:e,state:t},{entities:n,relations:a}){console.log("retrieve sub table!!!"),e("TABLE_INTERACTIVE_ON"),e("UPDATE_INTERACTIVE_TABLE",{entities:n,relations:a}),e("RESET_TABLE_SELECTED")},resetTableGraph({commit:e,state:t}){e("TABLE_INTERACTIVE_OFF"),e("RESET_GRAPHDATA")},async node_expand({commit:e,state:t},{node_id:n,relation:a}){e("SET_LOADING",!0);const o=await(0,Z.vd)(t.graphData,n,a,t.expandThreshold);e("SET_LOADING",!1),200==o.status?(e("NODE_EXPAND",{updatedGraphData:o["data"]}),e("SET_GRAPHDATA_RELATION_TYPE_DATA",o["data"])):alert("Expansion not successful")},node_remove({state:e,commit:t},{node_id:n}){const a=(0,Z.gT)(e.graphData,n);t("NODE_REMOVE",{updatedGraphData:a})},async load_map({state:e,commit:t}){const n=await j();null!=n&&(t("LOADIN_MAP_DATA",n["data"]),t("SET_DATABASE_NAME",n["database"]))},async retrieveNodesLinksWithTypes({state:e,commit:t},{entity_type:n,relationship_type:a}){t("SET_LOADING",!0);const o=await(0,Z.rr)(n,a);t("SET_LOADING",!1),200==o.status?(t("NODE_EXPAND",{updatedGraphData:o["data"]}),t("SET_GRAPHDATA_RELATION_TYPE_DATA",o["data"]),t("RELATION_STATUS_ON")):alert("Expansion not successful")},async retrieveNodeGeo({commit:e},{node:t}){if(console.log("Check node info"),e("MAP_IN_QUERY"),null!=t){console.log(t);const n=await H(t);console.log(n),null!=n&&e("LOAD_QUERY_MAP_INFO",n)}},active_tab({commit:e},t){e("ACTIVE_TAB",t)},changeCurrentDraggingVM({commit:e},t){e("SET_CRRENTDRAGGING",t)},containerSizeChange({commit:e,state:t},{container:n,height:a}){t.tableContainer.height=a},async county2node({commit:e},t){var n=await q(t);console.log(n),e("SET_graphData",n["data"]),e("RELATION_STATUS_COUNTY")},updateColorMapping({commit:e},{label:t,color:n}){e("UPDATE_COLOR_MAPPING",{label:t,color:n})}};var X=new s.ZP.Store({state:$,getters:{},mutations:W,actions:z,modules:{menu:B}});a.Z.config.productionTip=!1,n(5441),new a.Z({vuetify:I,router:P,store:X,render:e=>e(O)}).$mount("#app")},3938:function(e,t,n){n.d(t,{_2:function(){return i},gT:function(){return l},vd:function(){return s},rr:function(){return c}});var a=n(9669),o=n.n(a),r="https://vaapi.develop.tapis.io/";function i(e,t,n){const a=e.results[0].data[0].graph.nodes,o=e.results[0].data[0].graph.relationships;console.log("getting nodes and links before parsing"),t.splice(0,t.length),n.splice(0,n.length),a.forEach((e=>{t.push(e.id)})),o.forEach((e=>{n.push(e.id)}))}function l(e,t){const n={...e},a=n.results[0].data[0].graph.nodes,o=n.results[0].data[0].graph.relationships;null==t&&alert("empty node id to be remove");for(let i=0;i<a.length;i++)if(a[i].id==t){a.splice(i,1);break}const r=[];for(let i=0;i<o.length;i++)o[i].startNode==t||o[i].endNode==t?console.log("REMOVED! - starNode: "+o[i].startNode+", endNode: "+o[i].endNode):r.push(o[i]);return n.results[0].data[0].graph.relationships=r,n}async function s(e,t,n,a){const i={...e},l=i.results[0].data[0].graph.nodes,s=i.results[0].data[0].graph.relationships,c=[],u=[];l.forEach((e=>{c.push(e.id)})),s.forEach((e=>{u.push(e.id)}));const d={nodes:c,relations:u,expand_node:t,relationship_name:n,threshold:a},p=r+"expandNodeWithR",h=await o().post(p,d);return console.log(h),h}async function c(e,t){let n,a;0==t.length?(a=r+"getGwithEntityType",n={entity_type:e}):(a=r+"getGwithRelationshipType",n={relationship_type:t}),console.log(e),console.log(t);const i=await o().post(a,n);return console.log(i),i}}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var r=t[a]={exports:{}};return e[a].call(r.exports,r,r.exports,n),r.exports}n.m=e,function(){var e=[];n.O=function(t,a,o,r){if(!a){var i=1/0;for(u=0;u<e.length;u++){a=e[u][0],o=e[u][1],r=e[u][2];for(var l=!0,s=0;s<a.length;s++)(!1&r||i>=r)&&Object.keys(n.O).every((function(e){return n.O[e](a[s])}))?a.splice(s--,1):(l=!1,r<i&&(i=r));if(l){e.splice(u--,1);var c=o();void 0!==c&&(t=c)}}return t}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[a,o,r]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}}(),function(){n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,a){return n.f[a](e,t),t}),[]))}}(),function(){n.u=function(e){return"js/"+e+"."+{457:"73c70612",506:"bec333e1",803:"90970ebb"}[e]+".js"}}(),function(){n.miniCssF=function(e){return"css/"+e+"."+{457:"3125a2e5",506:"deb7979c",803:"cd95048c"}[e]+".css"}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="new_gui:";n.l=function(a,o,r,i){if(e[a])e[a].push(o);else{var l,s;if(void 0!==r)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==a||d.getAttribute("data-webpack")==t+r){l=d;break}}l||(s=!0,l=document.createElement("script"),l.charset="utf-8",l.timeout=120,n.nc&&l.setAttribute("nonce",n.nc),l.setAttribute("data-webpack",t+r),l.src=a),e[a]=[o];var p=function(t,n){l.onerror=l.onload=null,clearTimeout(h);var o=e[a];if(delete e[a],l.parentNode&&l.parentNode.removeChild(l),o&&o.forEach((function(e){return e(n)})),t)return t(n)},h=setTimeout(p.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=p.bind(null,l.onerror),l.onload=p.bind(null,l.onload),s&&document.head.appendChild(l)}}}(),function(){n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){n.p="/"}(),function(){var e=function(e,t,n,a){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css";var r=function(r){if(o.onerror=o.onload=null,"load"===r.type)n();else{var i=r&&("load"===r.type?"missing":r.type),l=r&&r.target&&r.target.href||t,s=new Error("Loading CSS chunk "+e+" failed.\n("+l+")");s.code="CSS_CHUNK_LOAD_FAILED",s.type=i,s.request=l,o.parentNode.removeChild(o),a(s)}};return o.onerror=o.onload=r,o.href=t,document.head.appendChild(o),o},t=function(e,t){for(var n=document.getElementsByTagName("link"),a=0;a<n.length;a++){var o=n[a],r=o.getAttribute("data-href")||o.getAttribute("href");if("stylesheet"===o.rel&&(r===e||r===t))return o}var i=document.getElementsByTagName("style");for(a=0;a<i.length;a++){o=i[a],r=o.getAttribute("data-href");if(r===e||r===t)return o}},a=function(a){return new Promise((function(o,r){var i=n.miniCssF(a),l=n.p+i;if(t(i,l))return o();e(a,l,o,r)}))},o={143:0};n.f.miniCss=function(e,t){var n={457:1,506:1,803:1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=a(e).then((function(){o[e]=0}),(function(t){throw delete o[e],t})))}}(),function(){var e={143:0};n.f.j=function(t,a){var o=n.o(e,t)?e[t]:void 0;if(0!==o)if(o)a.push(o[2]);else{var r=new Promise((function(n,a){o=e[t]=[n,a]}));a.push(o[2]=r);var i=n.p+n.u(t),l=new Error,s=function(a){if(n.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var r=a&&("load"===a.type?"missing":a.type),i=a&&a.target&&a.target.src;l.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",l.name="ChunkLoadError",l.type=r,l.request=i,o[1](l)}};n.l(i,s,"chunk-"+t,t)}},n.O.j=function(t){return 0===e[t]};var t=function(t,a){var o,r,i=a[0],l=a[1],s=a[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(o in l)n.o(l,o)&&(n.m[o]=l[o]);if(s)var u=s(n)}for(t&&t(a);c<i.length;c++)r=i[c],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(u)},a=self["webpackChunknew_gui"]=self["webpackChunknew_gui"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))}();var a=n.O(void 0,[998],(function(){return n(7944)}));a=n.O(a)})();
//# sourceMappingURL=app.421a2b66.js.map